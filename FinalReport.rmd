---
title: "GSS challange Less Data"
author: "Gianna Chevez"
date: "10/1/24"
output: html_document
---



```{r include=FALSE,echo=FALSE}
source(file="fisherXY.R")
require(tidyverse)
require(tigerstats)
require(knitr)
require(foreign)
GSS <-read.dta(file="GSS2016.dta")
GSS <- droplevels(GSS)
mydata <- select(GSS,sex,race,cappun,degree,relig,gunlaw,tvhours,owngun,age,wordsum)
mydata <- na.omit(mydata)
```

# Introduction

<!--In this section you explain what you are trying to show.  Where did the data come from?  What is the research or other question you are trying to answer?.  If you skimp in this section expect to be marked down in your grade. Paint a picture of the project a couple of paragraphs is expected!-->

Is attitude toward capitol punishment (cappun) independent of race (race)?
If not, then whose view differs from whom??

# Methods

<!--Decide on your methods:  use "variable analysis" or other appropriate descriptors.  Make sure to choose at least one graphical method and at least one numerical method. Discuss what data manipulations may be needed for example subsetting or other binning procedures and what sort of graphical displays and inferential tools will be used!-->

# Results

<!--Divide this section into two sub-sections:  One for your descriptive  results and one for your inferential results.!-->

## Descriptive Results

### Graphical Descriptive Results

<!--Graphical results here.  Make sure to show your code.  Provide appropriate labels for axes, giving units if possible, and provide a good title for the graph, too.  Use the graphical results to describe the patterns if any that exist in the data as focused toward the research question. Bottom line is to explain the features of the graph that are relevant to conforming or departing to what is expected by your null hypothesis !-->

```{r}
dd3 <- mydata %>% group_by(cappun,race) %>% summarize(count=n()) %>% mutate(prcnt=count/sum(count))


# the group_by followed by summarize(count=n())

basicC <- ggplot(dd3,aes(x=race,y=count,fill=cappun))
basicC + geom_bar(stat="identity",position="dodge")

#Now for percentage plot

basicCC <- ggplot(dd3,aes(x=race,y=prcnt*100,fill=cappun)) 
basicCC + geom_bar(stat="identity", position = "dodge")
```

The data shows clear mathematical disparities in capital punishment opinions. Black respondents exhibit the highest opposition, with opposition counts significantly exceeding favor. White respondents show the highest favorability, where favor clearly outweighs opposition. The "other" group is closer to equilibrium, but opposition still surpasses favor. The difference between favor and opposition is greatest for white and black respondents, with white favoring capital punishment and black respondents strongly opposing it. The "other" group shows a smaller but consistent trend of higher opposition. These patterns highlight the varying degrees of support and opposition across racial groups quantitatively.


## Now with LESS data (more variables give less data due to NA's) create the approate graphic displays to answer the question.





### Numerical Descriptive Results

<!--Numerical results go here. Use the numerical results to describe the patterns if any that exist in the data as focused toward the research question!-->

```{r}
table2 <- xtabs(~cappun + race, data=mydata)
rowPerc(table2)
colPerc(table2)
```


The data shows the white group favors capital punishment with a ratio of about 2:1, meaning for every two people in favor, one is opposed. The black group is more evenly split but slightly against, suggesting their opposition is marginally higher than support. The "other" group opposes capital punishment more strongly, with a ratio of around 3:2, indicating for every three people opposed, two favor it. These ratios highlight differing levels of support and opposition across racial groups.



## Inferential Results

<!--State hypothesis clearly.  Make sure your discussion of the inferential test covers all the aspects that the test output produces, such as test statistic, p-value etc.  Make a decision about the null hypothesis, explain the assumptions on which the selected test/procedure was based, and why the chosen procedure satisfys the assumptions and is appropriate to answer the research question!-->

```{r}
chisq.test(table2)
chisqtestGC(table2)
```

The p-value obtained is 0.00005896, which is significantly low, indicating a strong likelihood of a meaningful association between the variables under investigation. Such a low p-value suggests that the observed results are not due to random chance, prompting further analysis. Therefore, it is essential to conduct a Fisher's exact test to determine the statistical significance and relationship between the groups more accurately. This test will provide a more nuanced understanding of the data and clarify the underlying patterns present in the sample.


```{r}
fisherXY(mydata$race, mydata$cappun, confL = 0.99, printAll = TRUE)
```


The p-values for the comparisons reveal distinct relationships between the racial groups. The p-value for the comparison between white and black respondents is 0.00001741, indicating a highly significant difference, suggesting a strong association in their opinions. In contrast, the comparison between white and other respondents yields a p-value of 0.2565, which is not statistically significant, indicating no meaningful difference in their views. Similarly, the p-value for the black and other group comparison is 0.06299, approaching significance but still above the conventional threshold. Overall, these p-values illustrate varying degrees of difference among the groups, highlighting significant disparities in opinions on capital punishment.


# Discussion and Conclusion

<!--Discussion and conclusion here.  If you found a relationship be sure to consider whether the relationship occurs because one of the variavbles causes the other, or whether they perhasps are related for some other reason.  Watch the chapter 6 videos from the GeorgeTown videos collection.!-->

Using 821 variables, the number 2 branch analysis indicates that the white and other groups favor capital punishment, while the black group predominantly opposes it. This contrasts with the master branch, which utilizes 3,000 variables, leading to significant differences in our graphical representations. In the number 2 branch, the white group exhibits a 2:1 ratio in favor of capital punishment, whereas the master branch displays a closer ratio of approximately 2:3 in favor. Notably, the "other" group shows a higher opposition to capital punishment in the master branch, while in the number 2 branch, they demonstrate greater support. Additionally, the black group has a 2:1 ratio opposing capital punishment in the master branch, compared to about 2:3 in the number 2 branch. These disparities highlight how the choice of variables can influence the interpretation of attitudes toward capital punishment across different racial groups.

